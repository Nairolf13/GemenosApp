import React, { useState } from 'react';
import '../assets/css/Actualites.css';

const Actualites = () => {
  const [selectedCategory, setSelectedCategory] = useState('Toutes');

  const actualites = [
    {
      id: 1,
      titre: 'F√™te de la Saint-√âloi 2024',
      description: 'Rejoignez-nous pour la traditionnelle f√™te de la Saint-√âloi ! Au programme : messe, procession, animations pour enfants, march√© artisanal et repas partag√©.',
      contenu: 'La f√™te patronale de Saint-√âloi aura lieu le dimanche 1er d√©cembre 2024. Cette c√©l√©bration traditionnelle d√©butera par une messe √† 10h30 en l\'√©glise Saint-Pierre, suivie de la procession dans les rues du village. L\'apr√®s-midi sera anim√© par des spectacles folkloriques, un march√© d\'artisans locaux et des jeux pour enfants sur la place du village. Le repas communautaire sera servi √† partir de 12h30 √† la salle des f√™tes (r√©servation obligatoire). Venez nombreux c√©l√©brer notre saint patron !',
      image: '/imgs/saint-eloi.jpg',
      date: '2024-11-15',
      categorie: 'Tradition',
      auteur: 'Mairie de G√©menos',
      important: true,
      dateEvenement: '1er d√©cembre 2024'
    },
    {
      id: 2,
      titre: 'Ruralia 2024 - Salon de l\'Agriculture',
      description: 'Le salon Ruralia revient pour sa 15√®me √©dition ! D√©couvrez les producteurs locaux, les innovations agricoles et participez aux d√©monstrations.',
      contenu: 'Ruralia 2024 se d√©roulera du 22 au 24 novembre au parc des expositions. Cette ann√©e, le salon met √† l\'honneur l\'agriculture durable et les circuits courts. Plus de 200 exposants pr√©senteront leurs produits et savoir-faire. Au programme : d√©monstrations de mat√©riel agricole, concours de bovins, march√© fermier, conf√©rences sur l\'avenir de l\'agriculture, animations pour toute la famille. Entr√©e gratuite pour les moins de 12 ans. Restauration sur place avec des produits locaux.',
      image: '/imgs/ruralia.jpg',
      date: '2024-11-10',
      categorie: 'Agriculture',
      auteur: 'Comit√© d\'organisation Ruralia',
      important: true,
      dateEvenement: '22-24 novembre 2024'
    },
    {
      id: 3,
      titre: 'Grand Loto de l\'√âcole Publique',
      description: 'L\'association des parents d\'√©l√®ves organise son loto annuel au profit des sorties scolaires. De nombreux lots √† gagner !',
      contenu: 'Samedi 30 novembre √† 20h30, salle des f√™tes municipale. L\'APE de l\'√©cole publique organise son traditionnel loto annuel. Cette ann√©e, plus de 2000‚Ç¨ de lots sont mis en jeu : √©lectrom√©nager, bons d\'achat, paniers garnis, week-end en g√Æte, etc. Tarifs : 2‚Ç¨ le carton, 10‚Ç¨ les 6 cartons, 15‚Ç¨ les 12 cartons. Buvette et petite restauration sur place. Tous les b√©n√©fices serviront √† financer les sorties p√©dagogiques et les activit√©s scolaires. R√©servations conseill√©es au 04.42.32.XX.XX',
      image: '/imgs/loto.jpg',
      date: '2024-11-08',
      categorie: '√âducation',
      auteur: 'APE √âcole Publique',
      important: false,
      dateEvenement: '30 novembre 2024'
    },
    {
      id: 4,
      titre: 'March√© de No√´l Artisanal',
      description: 'Venez d√©couvrir les cr√©ations des artisans locaux et d√©guster les sp√©cialit√©s de saison lors de notre march√© de No√´l.',
      contenu: 'Du 14 au 16 d√©cembre, la place du village se transforme en march√© de No√´l ! Une vingtaine d\'artisans et producteurs locaux vous proposeront leurs cr√©ations : bijoux, poteries, savons artisanaux, miels, confitures, vin chaud, marrons grill√©s... Le P√®re No√´l sera pr√©sent samedi et dimanche de 15h √† 17h pour le plus grand bonheur des enfants. Animations musicales avec la chorale de l\'√©cole et l\'harmonie municipale. Concours de la plus belle d√©coration de vitrine pour les commer√ßants.',
      image: '/imgs/marche-noel.jpg',
      date: '2024-11-12',
      categorie: 'Culture',
      auteur: 'Office de Tourisme',
      important: true,
      dateEvenement: '14-16 d√©cembre 2024'
    },
    {
      id: 5,
      titre: 'Collecte de Jouets pour No√´l',
      description: 'Le CCAS organise sa collecte annuelle de jouets au profit des familles en difficult√© de la commune.',
      contenu: 'Du 1er au 20 d√©cembre, d√©posez vos jouets neufs ou en tr√®s bon √©tat dans les points de collecte : mairie, √©cole, pharmacie, bureau de poste. Cette action solidaire permet d\'offrir un No√´l magique aux enfants de familles en situation pr√©caire. Sont particuli√®rement recherch√©s : jeux √©ducatifs, livres, peluches, jeux de soci√©t√©, mat√©riel de pu√©riculture. La distribution aura lieu le 22 d√©cembre de 14h √† 17h au CCAS. Merci pour votre g√©n√©rosit√© !',
      image: '/imgs/collecte-jouets.jpg',
      date: '2024-11-05',
      categorie: 'Solidarit√©',
      auteur: 'CCAS G√©menos',
      important: false,
      dateEvenement: '1er-20 d√©cembre 2024'
    },
    {
      id: 6,
      titre: 'Concours d\'Illuminations de No√´l',
      description: 'Participez au concours des plus belles d√©corations de No√´l ! Inscriptions ouvertes jusqu\'au 1er d√©cembre.',
      contenu: 'La commune organise son 8√®me concours d\'illuminations de No√´l. Trois cat√©gories : maisons individuelles, commerces, et associations. Les inscriptions sont ouvertes jusqu\'au 1er d√©cembre en mairie. Le jury passera du 15 au 20 d√©cembre pour √©valuer originalit√©, esth√©tique et respect de l\'environnement. Remise des prix le 21 d√©cembre √† 18h en mairie, suivie d\'un vin chaud offert. Lots : 300‚Ç¨, 200‚Ç¨ et 100‚Ç¨ par cat√©gorie, plus prix sp√©cial "coup de c≈ìur" du public.',
      image: '/imgs/concours-illuminations.jpg',
      date: '2024-11-01',
      categorie: 'Culture',
      auteur: 'Service Animation',
      important: false,
      dateEvenement: 'Jusqu\'au 1er d√©cembre'
    },
    {
      id: 7,
      titre: 'Th√©√¢tre : "Les Fourberies de Scapin"',
      description: 'La troupe amateur "Les Tr√©teaux de G√©menos" pr√©sente la c√©l√®bre com√©die de Moli√®re.',
      contenu: 'Les 6, 7 et 8 d√©cembre √† 20h30, salle culturelle municipale. La troupe locale pr√©sente une adaptation moderne et dr√¥le des "Fourberies de Scapin" de Moli√®re. Mise en sc√®ne par Marie Dubois, cette version revisit√©e promet de s√©duire petits et grands. 15 com√©diens amateurs sur sc√®ne pour 1h30 de pur divertissement. Tarifs : 12‚Ç¨ adultes, 8‚Ç¨ enfants et √©tudiants, 10‚Ç¨ groupes (+ de 10 personnes). R√©servations au 04.42.32.XX.XX ou sur place 30min avant le spectacle.',
      image: '/imgs/theatre.jpg',
      date: '2024-10-28',
      categorie: 'Culture',
      auteur: 'Les Tr√©teaux de G√©menos',
      important: false,
      dateEvenement: '6-8 d√©cembre 2024'
    },
    {
      id: 8,
      titre: 'Assembl√©e G√©n√©rale du Comit√© des F√™tes',
      description: 'Tous les b√©n√©voles et sympathisants sont invit√©s √† l\'AG annuelle du Comit√© des F√™tes.',
      contenu: 'Vendredi 29 novembre √† 20h, salle de r√©union de la mairie. Ordre du jour : bilan des manifestations 2024, pr√©sentation des comptes, projets 2025, renouvellement du bureau. Le Comit√© des F√™tes recherche de nouveaux b√©n√©voles pour organiser les √©v√©nements communaux. Venez d√©couvrir nos activit√©s et rejoindre une √©quipe dynamique ! Pot de l\'amiti√© offert √† l\'issue de la r√©union. Renseignements aupr√®s du pr√©sident : Jean-Pierre Martin au 06.XX.XX.XX.XX',
      image: '/imgs/comite-fetes.jpg',
      date: '2024-11-20',
      categorie: 'Vie associative',
      auteur: 'Comit√© des F√™tes',
      important: false,
      dateEvenement: '29 novembre 2024'
    }
  ];

  const categories = ['Toutes', 'Tradition', 'Agriculture', '√âducation', 'Culture', 'Solidarit√©', 'Vie associative'];

  const [selectedArticle, setSelectedArticle] = useState(null);

  const filteredActualites = selectedCategory === 'Toutes' 
    ? actualites 
    : actualites.filter(actualite => actualite.categorie === selectedCategory);

  const getCategoryColor = (categorie) => {
    switch(categorie) {
      case 'Tradition': return '#8B4513';
      case 'Agriculture': return '#4CAF50';
      case '√âducation': return '#2196F3';
      case 'Culture': return '#9C27B0';
      case 'Solidarit√©': return '#F44336';
      case 'Vie associative': return '#FF9800';
      default: return '#757575';
    }
  };

  const formatDate = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString('fr-FR', { 
      day: 'numeric', 
      month: 'long', 
      year: 'numeric' 
    });
  };

  return (
    <div className="actualites-page">
      {/* Hero Section */}
      <div className="actualites-hero">
        <div className="actualites-hero-container">
          <h1>Actualit√©s de G√©menos</h1>
          <p>Restez inform√©s des √©v√©nements, festivit√©s et nouveaut√©s de votre commune</p>
        </div>
      </div>

      <div className="actualites-container">
        {/* Filtres */}
        <div className="actualites-filters">
          <h2>üì∞ Toutes les actualit√©s</h2>
          <div className="filter-buttons">
            {categories.map(category => (
              <button
                key={category}
                className={`filter-btn ${selectedCategory === category ? 'active' : ''}`}
                onClick={() => setSelectedCategory(category)}
                style={selectedCategory === category ? { 
                  backgroundColor: getCategoryColor(category),
                  color: 'white'
                } : {}}
              >
                {category}
              </button>
            ))}
          </div>
        </div>

        {/* Actualit√©s importantes */}
        <div className="actualites-importantes">
          <h3>üî• √Ä ne pas manquer</h3>
          <div className="importantes-grid">
            {actualites.filter(a => a.important).slice(0, 3).map(actualite => (
              <div key={actualite.id} className="actualite-importante">
                <div className="importante-badge">IMPORTANT</div>
                <h4>{actualite.titre}</h4>
                <p>{actualite.description.substring(0, 100)}...</p>
                <div className="importante-date">üìÖ {actualite.dateEvenement}</div>
                <button 
                  className="importante-btn"
                  onClick={() => setSelectedArticle(actualite)}
                >
                  Lire la suite
                </button>
              </div>
            ))}
          </div>
        </div>

        {/* Liste des actualit√©s */}
        <div className="actualites-grid">
          {filteredActualites.map(actualite => (
            <article key={actualite.id} className="actualite-card">
              <div className="actualite-image">
                <img src={actualite.image} alt={actualite.titre} />
                <div 
                  className="actualite-category"
                  style={{ backgroundColor: getCategoryColor(actualite.categorie) }}
                >
                  {actualite.categorie}
                </div>
                {actualite.important && (
                  <div className="importance-badge">üî•</div>
                )}
              </div>
              
              <div className="actualite-content">
                <div className="actualite-meta">
                  <span className="actualite-date">üìÖ {formatDate(actualite.date)}</span>
                  <span className="actualite-auteur">‚úçÔ∏è {actualite.auteur}</span>
                </div>
                
                <h3 className="actualite-titre">{actualite.titre}</h3>
                <p className="actualite-description">{actualite.description}</p>
                
                <div className="actualite-footer">
                  <div className="actualite-event-date">
                    üéØ √âv√©nement : {actualite.dateEvenement}
                  </div>
                  <button 
                    className="actualite-btn"
                    onClick={() => setSelectedArticle(actualite)}
                  >
                    Lire plus ‚Üí
                  </button>
                </div>
              </div>
            </article>
          ))}
        </div>

        {/* Newsletter subscription */}
        <div className="newsletter-section">
          <h3>üì¨ Restez inform√©</h3>
          <p>Inscrivez-vous √† notre newsletter pour recevoir toutes les actualit√©s de G√©menos</p>
          <div className="newsletter-form">
            <input 
              type="email" 
              placeholder="Votre adresse email"
              className="newsletter-input"
            />
            <button className="newsletter-btn">S'abonner</button>
          </div>
        </div>
      </div>

      {/* Modal pour article complet */}
      {selectedArticle && (
        <div className="modal-overlay" onClick={() => setSelectedArticle(null)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <button 
              className="modal-close"
              onClick={() => setSelectedArticle(null)}
            >
              ‚úï
            </button>
            
            <img 
              src={selectedArticle.image} 
              alt={selectedArticle.titre}
              className="modal-image"
            />
            
            <div className="modal-body">
              <div className="modal-meta">
                <span 
                  className="modal-category"
                  style={{ backgroundColor: getCategoryColor(selectedArticle.categorie) }}
                >
                  {selectedArticle.categorie}
                </span>
                <span className="modal-date">üìÖ {formatDate(selectedArticle.date)}</span>
              </div>
              
              <h2 className="modal-titre">{selectedArticle.titre}</h2>
              
              <div className="modal-event-date">
                üéØ <strong>Date de l'√©v√©nement :</strong> {selectedArticle.dateEvenement}
              </div>
              
              <div className="modal-contenu">
                {selectedArticle.contenu.split('\n').map((paragraph, index) => (
                  <p key={index}>{paragraph}</p>
                ))}
              </div>
              
              <div className="modal-footer">
                <span className="modal-auteur">‚úçÔ∏è Publi√© par {selectedArticle.auteur}</span>
                <div className="modal-actions">
                  <button className="modal-share">üì§ Partager</button>
                  <button className="modal-calendar">üìÖ Ajouter au calendrier</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default Actualites;
